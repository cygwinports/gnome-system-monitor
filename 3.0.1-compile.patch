--- origsrc/gnome-system-monitor-3.0.1/configure.ac	2011-05-23 15:57:24.000000000 -0500
+++ src/gnome-system-monitor-3.0.1/configure.ac	2011-05-25 01:13:52.748243200 -0500
@@ -57,7 +57,7 @@ if test "$GCC" = "yes" -a "$set_more_war
     -Wcast-align -Wsign-compare \
     -std=gnu89 \
     $CFLAGS"
-    CXXFLAGS="-Wall -std=c++98 $CXXFLAGS"
+    CXXFLAGS="-Wall -std=gnu++98 $CXXFLAGS"
 else
     AC_MSG_RESULT(no)
 fi
--- origsrc/gnome-system-monitor-3.0.1/src/openfiles.cpp	2011-03-24 19:39:45.000000000 -0500
+++ src/gnome-system-monitor-3.0.1/src/openfiles.cpp	2011-05-25 01:16:40.839857500 -0500
@@ -4,6 +4,7 @@
 #include <glibtop/procopenfiles.h>
 #include <sys/stat.h>
 #include <netdb.h>
+#include <stdio.h>
 #include <sys/types.h>
 #include <sys/socket.h>
 #include <netinet/in.h>
@@ -15,6 +16,10 @@
 #include "util.h"
 #include "settings-keys.h"
 
+#ifndef NI_IDN
+#define NI_IDN 0
+#endif
+
 enum
 {
 	COL_FD,
